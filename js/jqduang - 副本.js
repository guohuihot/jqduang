/*!
* @author : ahuing <ahuing@163.com>
* @date   : 2015-04-10
* @name   : jqduang - 副本 v2.0
* @modify : 2016-06-10 01:09:01
 */
!function($,e,t){"use strict";function i(e,t){return"index"==e?this:this.each(function(){var i,s=$(this),a=s.data("jqDuang");a||(i=$.extend({},n.DEFAULTS,s.data(),"object"==typeof e&&e),s.data("jqDuang",a=new n(this,i)),a.init(),i=null),"string"==typeof e?a[e](t):"number"==typeof e&&a.play(a.loopNext=e)})}var s,n=function(e,t){this.o=t,this.$ele=$(e),this.$obj=this.$ele.find(t.obj),this.$objExt=this.$ele.find(t.objExt),this.$obj.length||(this.$obj=this.$objExt,delete this.$objExt),this.len=this.$obj.length,this.dire=0==t.effect.search(/top|weibo/)&&"top"||"left",this.effect=t.effect.replace(this.dire,"")};n.DEFAULTS={obj:"li",cell:null,trigger:"mouseover",effect:"fade",speed:500,index:0,autoplay:1,interval:3e3,prevbtn:null,nextbtn:null,delay:150,easing:"swing",fluid:0,lazyload:"src",visible:1,steps:1,overstop:1,showtit:0,pagewrap:null,btnloop:1,wheel:0,actclass:"act"},n.prototype={lazyload:function(e){var t=this.o.lazyload;e.each(function(e,i){$(this).find('img:not(".loaded")').attr("src",function(){return $(this).addClass("loaded").data(t)})})},firstUper:function(e){return e.replace(/(\w)/,function(e){return e.toUpperCase()})},getSpace:function(e,t){return e["outer"+this.firstUper(t)](!0)-e[t]()},initBtn:function(e){var t=this,i=t.o,s=t.$ele.find(i[e+"btn"]);s.on("Marqueue"==t.effect?i.trigger:"click.jd",function(){return $(this).hasClass("disabled")?void 0:("Marqueue"==t.effect?(i.steps="prev"==e?1:-1,t.next()):t[e](),!1)}).attr({unselectable:"on",onselectstart:"return false;"})},init:function(){var t,i,s,n,a,l,o,r,c,f,d=this,p=d.$obj,u=p.parent(),h=u.parent(),b=d.o,g={position:"relative",overflow:"hidden"},v=d.dire,j="top"==v&&"height"||"width",x="outer"+d.firstUper(j);if(d.pages=!d.effect&&Math.ceil((d.len-b.visible)/b.steps)+1||Math.ceil(d.len/b.steps),!(d.pages<=1||d.len<=b.visible)){switch(p.css("float","top"==v?"none":"left"),b.fluid&&1==b.visible&&{fade:1,fold:1,leftLoop:1,left:1}[b.effect]?(j="width",i=d.getSpace(p.eq(0),j),d.$ele.css(j,"auto"),d.size=d.$ele[x](!0),p.css(j,d.size-i),$(e).on("resize.jd",function(){var e=d.size;d.size=d.$ele[x](!0),u.stop(!0,!0).css(v,function(t,i){return parseInt(i)-(d.size-e)*(d.index+("Loop"==d.effect))}),h.css(j,d.size),d.$obj.css(j,d.size-i)})):d.size=p[x](!0),d.effect){case"fade":d.$obj.hide();break;case"fold":p.css({position:"absolute",display:"none",left:0,top:0}),g["height"]=p.height(),h.css(g);break;case"weibo":u.css("position","relative"),g[j]=d.size*b.visible,h.css(g);break;case"Marqueue":default:s={position:"relative",overflow:"hidden"},n=p.eq(0),a=parseInt(n.css("margin-"+v))-parseInt(n.css("margin-"+("left"==v?"right":"bottom"))),s[j]=29999,d.effect&&(d.$obj=u.append(p.slice(0,b.visible).clone()).prepend(p.slice(d.len-b.visible).clone()).children(),"Marqueue"==d.effect&&(d.scrollSize=d.size*d.len,b.steps=-1,s[d.dire]=0)),g[j]=d.size*b.visible+a,u.css(s),h.css(g)}if(b.trigger=b.trigger.replace(".jd","")+".jd",b.cell&&"Marqueue"!=d.effect){if(l=d.$ele.find(b.cell),t=l.children(),t.length)t=t.slice(0,d.pages),u.data("cells",t.length);else{for(r=[],c=0;c<d.pages;c++)r.push("<i>"+(c+1)+"</i>");t=$(r.join("")).appendTo(d.$ele.find(b.cell))}t.on(b.trigger,function(){return clearTimeout(o),d.loopNext=t.index(this),o=setTimeout(function(){d.play(d.loopNext)},b.delay),"click.jd"==b.trigger?!1:void 0}),d.$cells=t}b.autoplay&&(d.start(),!!b.overstop&&d.$obj.add(t).add(b.prevbtn&&"Marqueue"!=d.effect&&b.prevbtn+","+b.nextbtn||null).on("mouseover",$.proxy(d.stop,d)).on("mouseout",$.proxy(d.start,d))),b.showtit&&1==b.visible&&(f=p.eq(b.index).data(),d.$title=$('<a class="tit-jd" target="_blank" href="'+f.url+'">'+f.title+"</a>").insertAfter(h),f=null),b.prevbtn&&(d.initBtn("prev"),d.initBtn("next")),d.play(d.loopNext=b.index,1)}},start:function(){clearInterval(this.t1),this.t1=setInterval($.proxy(this.next,this),this.o.interval)},stop:function(){clearInterval(this.t1)},getPage:function(e){var t=(e+1)%this.pages*this.o.steps,i=(t+1)%this.pages*this.o.steps||this.$obj.length;return this.$obj.slice(t,i)},next:function(){this.play("Marqueue"!=this.effect&&(this.loopNext=this.index+1)%this.pages)},prev:function(){this.play(((this.loopNext=this.index-1)+this.pages)%this.pages)},play:function(e,i){var s,n,a,l,o,r,c=this,f=c.o,d=c.$obj.parent(),p={};if(i=i||f.speed,c.index!=e||"Marqueue"==c.effect){switch(c.$ele.trigger("before.jd"),c.effect){case"fade":!!f.lazyload&&c.lazyload(c.$obj.eq(e)),c.$obj.eq(c.index).hide(),c.$obj.eq(e).animate({opacity:"show"},i,f.easing);break;case"fold":!!f.lazyload&&c.lazyload(c.$obj.eq(e)),c.$obj.stop(!0,!0).eq(c.index).animate({opacity:"hide"},i,f.easing),c.$obj.eq(e).animate({opacity:"show"},i,f.easing);break;case"Marqueue":d.css(c.dire,function(e,t){var i=parseInt(t)+f.steps;return i<=-c.scrollSize?i=0:i>=0&&(i=-c.scrollSize),i});break;case"weibo":p[c.dire]=9*c.size/8,d.stop(!0,!0).animate(p,i,f.easing,function(){var e=d.children()[c.$obj.length-1];e.style.display="none",d[0].insertBefore(e,d[0].children[0]),d[0].style.top=0,$(e).fadeIn()});break;default:s=c.loopNext,n=c.len%f.steps||f.steps,a=0,l=f.visible,"Loop"==c.effect?s==c.pages?(o=f.visible,l=o+f.visible,d.css(c.dire,-c.size*(o-n))):-1==s?(a=o=f.visible+c.len-n,l=t,d.css(c.dire,-c.size*(o+n))):(a=o=f.visible+e*f.steps,0!=o&&(l+=o)):(o=s==c.pages-1||-1==s?c.len-f.visible:e*f.steps,a=o,0!=o&&(l+=o)),p[c.dire]=-c.size*o,d.stop(!0,"Loop"==c.effect).animate(p,i,f.easing,function(){console.log(111)}),!!f.lazyload&&c.lazyload(c.$obj.slice(a,l)),p=null}f.showtit&&1==f.visible&&(r=c.$obj.eq(e+1*("Loop"==c.effect)).data(),c.$title.html(r.title)[0].href=r.url),f.pagewrap&&c.$ele.find(f.pagewrap).html(e+1+"/"+c.pages),f.cell&&c.$cells.removeClass(f.actclass).eq(e).addClass(f.actclass),c.$objExt.length>e&&c.$objExt.hide().eq(e).show(),c.index=e,!f.btnloop&&f.prevbtn&&(c.$ele.find(f.prevbtn+","+f.nextbtn).removeClass("disabled"),0==e&&c.$ele.find(f.prevbtn).addClass("disabled"),e==c.pages-1&&c.$ele.find(f.nextbtn).addClass("disabled")),c.$ele.trigger("after.jd")}}},s=$.fn.jqDuang,$.fn.jqDuang=i,$.fn.jqDuang.Constructor=n,$.fn.jqDuang.noConflict=function(){return $.fn.jqDuang=s,this},$(e).on("load",function(){$("[data-duang=1], .jqDuang").each(function(){var e=$(this);i.call(e,e.data())})})}(jQuery,window);