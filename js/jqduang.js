/*!
* @author : ahuing <ahuing@163.com>
* @date   : 2015-04-10
* @name   : jqduang v2.0
* @modify : 2016-06-08 00:14:03
 */
!function($,e,t){"use strict";function i(e,t){return"index"==e?this.data("jqDuang").index:this.each(function(){var i,s=$(this),a=s.data("jqDuang");a||(i=$.extend({},n.DEFAULTS,s.data(),"object"==typeof e&&e),s.data("jqDuang",a=new n(this,i)),a.init(),i=null),"string"==typeof e?a[e](t):"number"==typeof e&&a.play(a.loopNext=e)})}var s,n=function(e,t){this.o=t,this.$ele=$(e),this.$obj=this.$ele.find(t.obj),this.$objExt=this.$ele.find(t.objExt),this.$obj.length||(this.$obj=this.$objExt,delete this.$objExt),this.len=this.$obj.length,this.dire=0==t.effect.search(/top|weibo/)&&"top"||"left",this.effect=t.effect.replace(this.dire,"")};n.DEFAULTS={obj:"li",cell:null,trigger:"mouseover",effect:"fade",speed:500,index:0,autoplay:1,interval:3e3,prevbtn:null,nextbtn:null,delay:150,easing:"swing",fluid:0,lazyload:"src",visible:1,steps:1,overstop:1,showtit:0,pagewrap:null,btnloop:1,wheel:0,actclass:"act"},n.prototype={lazyload:function(e){var t=this.o.lazyload;e.each(function(e,i){$(this).find('img:not(".loaded")').attr("src",function(){return $(this).addClass("loaded").data(t)})})},firstUper:function(e){return e.replace(/(\w)/,function(e){return e.toUpperCase()})},getSpace:function(e,t){return e["outer"+this.firstUper(t)](!0)-e[t]()},initBtn:function(e){var t=this,i=t.o,s=t.$ele.find(i[e+"btn"]);s.on("Marqueue"==t.effect?i.trigger:"click.jd",function(){return $(this).hasClass("disabled")?void 0:("Marqueue"==t.effect?(i.steps="prev"==e?1:-1,t.next()):t[e](),!1)}).attr({unselectable:"on",onselectstart:"return false;"})},init:function(){var t,i,s,n,a,l,o,r,c,d,f=this,p=f.$obj,u=p.parent(),h=u.parent(),b=f.o,g={position:"relative",overflow:"hidden"},v=f.dire,j="top"==v&&"height"||"width",x="outer"+f.firstUper(j);if(f.pages=!f.effect&&Math.ceil((f.len-b.visible)/b.steps)+1||Math.ceil(f.len/b.steps),!(f.pages<=1||f.len<=b.visible)){switch(p.css("float","top"==v?"none":"left"),b.fluid&&1==b.visible&&{fade:1,fold:1,leftLoop:1,left:1}[b.effect]?(j="width",i=f.getSpace(p.eq(0),j),f.$ele.css(j,"auto"),f.size=f.$ele[x](!0),p.css(j,f.size-i),$(e).on("resize.jd",function(){var e=f.size;f.size=f.$ele[x](!0),u.stop(!0,!0).css(v,function(t,i){return parseInt(i)-(f.size-e)*(f.index+("Loop"==f.effect))}),h.css(j,f.size),f.$obj.css(j,f.size-i)})):f.size=p[x](!0),f.effect){case"fade":f.$obj.hide();break;case"fold":p.css({position:"absolute",display:"none",left:0,top:0}),g["height"]=p.height(),h.css(g);break;case"weibo":u.css("position","relative"),g[j]=f.size*b.visible,h.css(g);break;case"Marqueue":default:s={position:"relative",overflow:"hidden"},n=p.eq(0),a=parseInt(n.css("margin-"+v))-parseInt(n.css("margin-"+("left"==v?"right":"bottom"))),s[j]=29999,f.effect&&(f.$obj=u.append(p.slice(0,b.visible).clone()).prepend(p.slice(f.len-b.visible).clone()).children(),"Marqueue"==f.effect&&(f.scrollSize=f.size*f.len,b.steps=-1,s[f.dire]=0)),g[j]=f.size*b.visible+a,u.css(s),h.css(g)}if(b.trigger=b.trigger.replace(".jd","")+".jd",b.cell&&"Marqueue"!=f.effect){if(l=f.$ele.find(b.cell),t=l.children(),t.length)t=t.slice(0,f.pages),u.data("cells",t.length);else{for(r=[],c=0;c<f.pages;c++)r.push("<i>"+(c+1)+"</i>");t=$(r.join("")).appendTo(f.$ele.find(b.cell))}t.on(b.trigger,function(){return clearTimeout(o),f.loopNext=t.index(this),o=setTimeout(function(){f.play(f.loopNext)},b.delay),"click.jd"==b.trigger?!1:void 0}),f.$cells=t}b.autoplay&&(f.start(),!!b.overstop&&f.$obj.add(t).add(b.prevbtn&&"Marqueue"!=f.effect&&b.prevbtn+","+b.nextbtn||null).on("mouseover",$.proxy(f.stop,f)).on("mouseout",$.proxy(f.start,f))),b.showtit&&1==b.visible&&(d=p.eq(b.index).data(),f.$title=$('<a class="tit-jd" target="_blank" href="'+d.url+'">'+d.title+"</a>").insertAfter(h),d=null),b.prevbtn&&(f.initBtn("prev"),f.initBtn("next")),f.play(f.loopNext=b.index,1)}},start:function(){clearInterval(this.t1),this.t1=setInterval($.proxy(this.next,this),this.o.interval)},stop:function(){clearInterval(this.t1)},next:function(){this.play("Marqueue"!=this.effect&&(this.loopNext=this.index+1)%this.pages)},prev:function(){this.play(((this.loopNext=this.index-1)+this.pages)%this.pages)},play:function(e,i){var s,n,a,l,o,r,c=this,d=c.o,f=c.$obj.parent(),p={};if(i=i||d.speed,c.index!=e||"Marqueue"==c.effect){switch(c.$ele.trigger("before.jd"),c.effect){case"fade":!!d.lazyload&&c.lazyload(c.$obj.eq(e)),c.$obj.eq(c.index).hide(),c.$obj.eq(e).animate({opacity:"show"},i,d.easing);break;case"fold":!!d.lazyload&&c.lazyload(c.$obj.eq(e)),c.$obj.stop(!0,!0).eq(c.index).animate({opacity:"hide"},i,d.easing),c.$obj.eq(e).animate({opacity:"show"},i,d.easing);break;case"Marqueue":f.css(c.dire,function(e,t){var i=parseInt(t)+d.steps;return i<=-c.scrollSize?i=0:i>=0&&(i=-c.scrollSize),i});break;case"weibo":p[c.dire]=9*c.size/8,f.stop(!0,!0).animate(p,i,d.easing,function(){var e=f.children()[c.$obj.length-1];e.style.display="none",f[0].insertBefore(e,f[0].children[0]),f[0].style.top=0,$(e).fadeIn()});break;default:s=c.loopNext,n=c.len%d.steps||d.steps,a=0,l=d.visible,"Loop"==c.effect?s==c.pages?(o=d.visible,l=o+d.visible,f.css(c.dire,-c.size*(o-n))):-1==s?(a=o=d.visible+c.len-n,l=t,f.css(c.dire,-c.size*(o+n))):(a=o=d.visible+e*d.steps,0!=o&&(l+=o)):(o=s==c.pages-1||-1==s?c.len-d.visible:e*d.steps,a=o,0!=o&&(l+=o)),p[c.dire]=-c.size*o,f.stop(!0,!1).animate(p,i,d.easing),!!d.lazyload&&c.lazyload(c.$obj.slice(a,l)),p=null}d.showtit&&1==d.visible&&(r=c.$obj.eq(e+1*("Loop"==c.effect)).data(),c.$title.html(r.title)[0].href=r.url),d.pagewrap&&c.$ele.find(d.pagewrap).html(e+1+"/"+c.pages),d.cell&&c.$cells.removeClass(d.actclass).eq(e).addClass(d.actclass),c.$objExt.length>e&&c.$objExt.hide().eq(e).show(),c.index=e,!d.btnloop&&d.prevbtn&&(c.$ele.find(d.prevbtn+","+d.nextbtn).removeClass("disabled"),0==e&&c.$ele.find(d.prevbtn).addClass("disabled"),e==c.pages-1&&c.$ele.find(d.nextbtn).addClass("disabled")),c.$ele.trigger("after.jd")}}},s=$.fn.jqDuang,$.fn.jqDuang=i,$.fn.jqDuang.Constructor=n,$.fn.jqDuang.noConflict=function(){return $.fn.jqDuang=s,this},$(e).on("load",function(){$("[data-duang=1], .jqDuang").each(function(){var e=$(this);i.call(e,e.data())})})}(jQuery,window);