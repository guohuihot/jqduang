/*!
* @author : ahuing <ahuing@163.com>
* @date   : 2015-04-10
* @name   : jqduang v2.0
* @modify : 2016-06-11 22:20:22
 */
!function($,e,t){"use strict";function i(e,t){return"index"==e?this.data("jqDuang").index:{get:1}[e]?this.data("jqDuang")[e](t):this.each(function(){var i,s=$(this),a=s.data("jqDuang");a||(i=$.extend({},n.DEFAULTS,s.data(),"object"==typeof e&&e),s.data("jqDuang",a=new n(this,i)),a.init(),i=null),"string"==typeof e?a[e](t):"number"==typeof e&&a.play(a.loopNext=e)})}var s,n=function(e,t){this.o=t,this.$ele=$(e),this.$obj=this.$ele.find(t.obj),this.$objex=this.$ele.find(t.objex),this.$obj.length||(this.$obj=this.$objex,delete this.$objex),this.len=this.$obj.length,this.dire=0==t.effect.search(/top|weibo/)&&"top"||"left",this.effect=t.effect.replace(this.dire,"")};n.DEFAULTS={obj:"li",cell:null,trigger:"mouseover",effect:"fade",speed:500,index:0,autoplay:1,interval:3e3,prevbtn:null,nextbtn:null,delay:100,easing:"swing",fluid:0,lazyload:null,visible:1,steps:1,overstop:1,showtit:0,pagewrap:null,btnloop:1,wheel:0,actclass:"act"},n.prototype={lazyload:function(e){var t=this.o.lazyload;e.each(function(e,i){$(this).find('img:not(".loaded")').attr("src",function(){return $(this).addClass("loaded").data(t)})})},firstUper:function(e){return e.replace(/(\w)/,function(e){return e.toUpperCase()})},getSpace:function(e,t){return e["outer"+this.firstUper(t)](!0)-e[t]()},initBtn:function(e){var t=this,i=t.o,s=t.$ele.find(i[e+"btn"]);s.on("Marqueue"==t.effect?i.trigger:"click.jd",function(){return $(this).hasClass("disabled")?void 0:("Marqueue"==t.effect?(i.steps="prev"==e?1:-1,t.next()):t[e](),!1)}).attr({unselectable:"on",onselectstart:"return false;"})},init:function(){var t,i,s,n,a,l,o,r,c,p,f=this,d=f.$obj,u=d.parent(),h=u.parent(),b=f.o,g={position:"relative",overflow:"hidden"},v=f.dire,j="top"==v&&"height"||"width",x="outer"+f.firstUper(j);if(f.pages=!f.effect&&Math.ceil((f.len-b.visible)/b.steps)+1||Math.ceil(f.len/b.steps),!(f.pages<=1||f.len<=b.visible)){switch(d.css("float","top"==v?"none":"left"),b.fluid&&1==b.visible&&{fade:1,fold:1,leftLoop:1,left:1}[b.effect]?(j="width",i=f.getSpace(d.eq(0),j),f.$ele.css(j,"auto"),f.size=f.$ele[x](!0),d.css(j,f.size-i),$(e).on("resize.jd",function(){var e=f.size;f.size=f.$ele[x](!0),u.stop(!0,!0).css(v,function(t,i){return parseInt(i)-(f.size-e)*(f.index+("Loop"==f.effect))}),h.css(j,f.size),f.$obj.css(j,f.size-i)})):f.size=d[x](!0),f.effect){case"fade":f.$obj.hide();break;case"fold":d.css({position:"absolute",display:"none",left:0,top:0}),g["height"]=d.outerHeight(!0),h.css(g);break;case"weibo":u.css("position","relative"),g[j]=f.size*b.visible,h.css(g);break;case"Marqueue":default:s={position:"relative",overflow:"hidden"},n=d.eq(0),a=parseInt(n.css("margin-"+v))-parseInt(n.css("margin-"+("left"==v?"right":"bottom"))),s[j]=29999,f.effect&&(f.$obj=u.append(d.slice(0,b.visible).clone()).prepend(d.slice(f.len-b.steps).clone()).children(),"Marqueue"==f.effect&&(f.scrollSize=f.size*f.len,b.steps=-1,s[f.dire]=0)),g[j]=f.size*b.visible+a,u.css(s),h.css(g)}if(b.trigger=b.trigger.replace(".jd","")+".jd",b.cell&&"Marqueue"!=f.effect){if(l=f.$ele.find(b.cell),t=l.children(),t.length)t=t.slice(0,f.pages),u.data("cells",t.length);else{for(r=[],c=0;c<f.pages;c++)r.push("<i>"+(c+1)+"</i>");t=$(r.join("")).appendTo(f.$ele.find(b.cell))}f.$cells=t.on(b.trigger,function(){return clearTimeout(o),f.loopNext=t.index(this),o=setTimeout(function(){f.play(f.loopNext)},b.delay),"click.jd"==b.trigger?!1:void 0})}b.autoplay&&(f.start(),!!b.overstop&&f.$obj.add(t).add(b.prevbtn&&"Marqueue"!=f.effect&&b.prevbtn+","+b.nextbtn||null).on("mouseover",$.proxy(f.stop,f)).on("mouseout",$.proxy(f.start,f))),b.showtit&&1==b.visible&&(p=d.eq(b.index).data(),f.$title=$('<a class="tit-jd" target="_blank" href="'+p.url+'">'+p.title+"</a>").insertAfter(h),p=null),b.prevbtn&&(f.initBtn("prev"),f.initBtn("next")),f.play(f.loopNext=b.index,1)}},start:function(){clearInterval(this.t1),this.t1=setInterval($.proxy(this.next,this),this.o.interval)},stop:function(){clearInterval(this.t1)},get:function(e){var t,i=this,s=i.o,n=i.loopNext;return"prev"==e?n--:"next"==e&&n++,t="Loop"==i.effect?e?n==i.pages+1?2:0==n?i.len+1:-2==n?i.len-1:-1==n?0:n==i.pages?1:1+n:n==i.pages?s.steps:-1==n?i.len:(1+n)*s.steps:n==i.pages?0:n==i.pages-1||-1==n?i.len-s.visible:e&&n==i.pages+1?1:n*s.steps,i.$obj.eq(t)},next:function(){this.play("Marqueue"!=this.effect&&(this.loopNext=this.index+1)%this.pages)},prev:function(){this.play(((this.loopNext=this.index-1)+this.pages)%this.pages)},play:function(e,i){var s,n,a,l,o,r=this,c=r.o,p=r.$obj.parent(),f={};if(i=i||c.speed,r.index!=e||"Marqueue"==r.effect){switch(r.$ele.trigger("before.jd"),r.effect){case"fade":!!c.lazyload&&r.lazyload(r.$obj.eq(e)),r.$obj.eq(r.index).hide(),r.$obj.eq(e).animate({opacity:"show"},i,c.easing);break;case"fold":!!c.lazyload&&r.lazyload(r.$obj.eq(e)),r.$obj.stop(!0,!0).eq(r.index).animate({opacity:"hide"},i,c.easing),r.$obj.eq(e).animate({opacity:"show"},i,c.easing);break;case"Marqueue":p.css(r.dire,function(e,t){var i=parseInt(t)+c.steps;return i<=-r.scrollSize?i=0:i>=0&&(i=-r.scrollSize),i});break;case"weibo":f[r.dire]=9*r.size/8,p.stop(!0,!0).animate(f,i,c.easing,function(){var e=p.children()[r.$obj.length-1];e.style.display="none",p[0].insertBefore(e,p[0].children[0]),p[0].style.top=0,$(e).fadeIn()});break;default:s=r.loopNext,"Loop"==r.effect?s==r.pages?(n=c.steps+r.len,l=function(){p.css(r.dire,-r.size*c.steps)}):-1==s?(n=0,l=function(){p.css(r.dire,-r.size*r.len)}):a=n=(1+e)*c.steps:s==r.pages-1||-1==s?n=r.len-c.visible:a=n=e*c.steps,f[r.dire]=-r.size*n,p.stop(!0,"Loop"==r.effect).animate(f,i,c.easing,l),!!c.lazyload&&r.lazyload(r.$obj.slice(a,null==a?t:a+c.visible)),f=null}c.showtit&&1==c.visible&&(o=r.$obj.eq(e+1*("Loop"==r.effect)).data(),r.$title.html(o.title)[0].href=o.url),c.pagewrap&&r.$ele.find(c.pagewrap).html(e+1+"/"+r.pages),c.cell&&r.$cells.removeClass(c.actclass).eq(e).addClass(c.actclass),r.$objex.length>e&&r.$objex.hide().eq(e).show(),r.index=e,!c.btnloop&&c.prevbtn&&(r.$ele.find(c.prevbtn+","+c.nextbtn).removeClass("disabled"),0==e&&r.$ele.find(c.prevbtn).addClass("disabled"),e==r.pages-1&&r.$ele.find(c.nextbtn).addClass("disabled")),r.$ele.trigger("after.jd")}}},s=$.fn.jqDuang,$.fn.jqDuang=i,$.fn.jqDuang.Constructor=n,$.fn.jqDuang.noConflict=function(){return $.fn.jqDuang=s,this},$(e).on("load",function(){$("[data-duang=1], .jqDuang").each(function(){var e=$(this);i.call(e,e.data())})})}(jQuery,window);